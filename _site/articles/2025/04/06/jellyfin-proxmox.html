<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>Setting Up qBittorrent with VPN Integration on Ubuntu Server &#8211; Devan</title>
<meta name="description" content="">
<meta name="keywords" content="qbittorrent, ubuntu, vpn, jellyfin, media-server">


<!-- Twitter Cards -->
<meta name="twitter:title" content="Setting Up qBittorrent with VPN Integration on Ubuntu Server">
<meta name="twitter:description" content="">



<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://localhost:4000/images/site-logo.png">

<!-- Open Graph -->
<meta property="og:locale" content="">
<meta property="og:type" content="article">
<meta property="og:title" content="Setting Up qBittorrent with VPN Integration on Ubuntu Server">
<meta property="og:description" content="">
<meta property="og:url" content="http://localhost:4000/articles/2025/04/06/jellyfin-proxmox.html">
<meta property="og:site_name" content="Devan">





<link rel="canonical" href="http://localhost:4000/articles/2025/04/06/jellyfin-proxmox.html">
<link href="http://localhost:4000/feed.xml" type="application/atom+xml" rel="alternate" title="Devan Feed">

<!-- https://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="http://localhost:4000/assets/css/main.css">
<!-- Webfonts -->
<script src="https://use.edgefonts.net/source-sans-pro:n2,i2,n3,i3,n4,i4,n6,i6,n7,i7,n9,i9;source-code-pro:n4,n7;volkhov.js"></script>

<meta http-equiv="cleartype" content="on">

<!-- HTML5 Shiv and Media Query Support -->
<!--[if lt IE 9]>
  <script src="http://localhost:4000/assets/js/vendor/html5shiv.min.js"></script>
  <script src="http://localhost:4000/assets/js/vendor/respond.min.js"></script>
<![endif]-->

<!-- Modernizr -->
<script src="http://localhost:4000/assets/js/vendor/modernizr-2.7.1.custom.min.js"></script>



<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="http://localhost:4000/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="http://localhost:4000/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="http://localhost:4000/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="http://localhost:4000/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="http://localhost:4000/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://localhost:4000/images/apple-touch-icon-144x144-precomposed.png">

</head>

<body id="post">

<div class="navigation-wrapper">
	<nav role="navigation" id="site-nav" class="animated drop">
	    <ul>
      
		    
		    <li><a href="http://localhost:4000/about/" >About</a></li>
		  
		    
		    <li><a href="http://localhost:4000/articles/" >Articles</a></li>
		  
		    
		    <li><a href="http://localhost:4000/publications/" >Publications</a></li>
		  
		    
		    <li><a href="http://localhost:4000/search/" >Search</a></li>
		  
	    </ul>
	</nav>
</div><!-- /.navigation-wrapper -->

<!--[if lt IE 9]><div class="upgrade"><strong><a href="http://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->

<header class="masthead">
	<div class="wrap">
      
  		<a href="http://localhost:4000/" class="site-logo" rel="home" title="Devan"><img src="http://localhost:4000/images/site-logo.png" width="200" height="200" alt="Devan logo" class="animated fadeInDown"></a>
      
      <h1 class="site-title animated fadeIn"><a href="http://localhost:4000/">Devan</a></h1>
		<h2 class="site-description animated fadeIn" itemprop="description">A repository of thoughts and notes</h2>
	</div>
</header><!-- /.masthead -->

<div class="js-menu-screen menu-screen"></div>


<div id="main" role="main">
  <article class="hentry">
    
    <div class="entry-wrapper">
      <header class="entry-header">
        <ul class="entry-tags">
          <li><a href="http://localhost:4000/tags/#qbittorrent" title="Pages tagged qbittorrent">qbittorrent</a></li><li><a href="http://localhost:4000/tags/#ubuntu" title="Pages tagged ubuntu">ubuntu</a></li><li><a href="http://localhost:4000/tags/#vpn" title="Pages tagged vpn">vpn</a></li><li><a href="http://localhost:4000/tags/#jellyfin" title="Pages tagged jellyfin">jellyfin</a></li><li><a href="http://localhost:4000/tags/#media-server" title="Pages tagged media-server">media-server</a></li>
        </ul>
        
          <h1 class="entry-title">Setting Up qBittorrent with VPN Integration on Ubuntu Server</h1>
        
      </header>
      <!--
        <footer class="entry-meta">
        
        
        <span class="author vcard">By <span class="fn"></span></span>
        <span class="entry-date date published"><time datetime="2025-04-06T00:00:00+08:00"><i class="fa fa-calendar-o"></i> April 06, 2025</time></span>
        
        
        <span class="social-share-twitter">
  <a href="https://twitter.com/intent/tweet?hashtags=qbittorrent,ubuntu,vpn,jellyfin,media-server&amp;text=Setting%20Up%20qBittorrent%20with%20VPN%20Integration%20on%20Ubuntu%20Server&amp;url=http://localhost:4000/articles/2025/04/06/jellyfin-proxmox.html" title="Share on Twitter" itemprop="Twitter"><i class="fa fa-twitter-square"></i> Tweet</a>
</span>
<span class="social-share-facebook">
  <a href="https://www.facebook.com/sharer/sharer.php?u=http://localhost:4000/articles/2025/04/06/jellyfin-proxmox.html" title="Share on Facebook" itemprop="Facebook"><i class="fa fa-facebook-square"></i> Like</a>
</span>
<span class="social-share-googleplus">
  <a href="https://plus.google.com/share?url=http://localhost:4000/articles/2025/04/06/jellyfin-proxmox.html" title="Share on Google Plus" itemprop="GooglePlus"><i class="fa fa-google-plus-square"></i> +1</a>
</span>
<!-- /.social-share -->
        
        </footer>
      <div class="entry-content">
        <h1 id="setting-up-qbittorrent-with-vpn-integration-on-ubuntu-server">Setting Up qBittorrent with VPN Integration on Ubuntu Server</h1>

<p>Setting up a torrent client on your home server can significantly enhance your media server setup, allowing you to automate downloads directly to your media library. This guide will walk you through setting up qBittorrent with VPN integration on an Ubuntu server, with specific focus on making it work with Jellyfin.</p>

<h2 id="why-qbittorrent">Why qBittorrent?</h2>

<p>After trying multiple solutions including Transmission, I settled on qBittorrent for its reliability, feature-rich web interface, and better stability. While Transmission is often recommended for its lightweight nature, I encountered numerous stability issues where the daemon would randomly crash or hang.</p>

<h2 id="prerequisites">Prerequisites</h2>

<ul>
  <li>Ubuntu server (this guide was tested on Ubuntu 24.04 LTS)</li>
  <li>An active VPN subscription (I use ExpressVPN)</li>
  <li>Basic familiarity with Linux command line</li>
  <li>SSH access to your server</li>
</ul>

<h2 id="installation-process">Installation Process</h2>

<h3 id="1-install-qbittorrent-nox-cli-version-with-webui">1. Install qBittorrent-nox (CLI version with WebUI)</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt update
<span class="nb">sudo </span>apt <span class="nb">install </span>qbittorrent-nox
</code></pre></div></div>

<h3 id="2-set-up-a-service-for-qbittorrent">2. Set Up a Service for qBittorrent</h3>

<p>Create a systemd service file to manage qBittorrent:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>nano /etc/systemd/system/qbittorrent.service
</code></pre></div></div>

<p>Add the following content, replacing “yourusername” with your actual username:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[Unit]
Description=qBittorrent Daemon Service
After=network.target

[Service]
Type=simple
User=yourusername
Group=yourusername
ExecStart=/usr/bin/qbittorrent-nox --webui-port=8080
Restart=on-failure

[Install]
WantedBy=multi-user.target
</code></pre></div></div>

<h3 id="3-create-download-directories">3. Create Download Directories</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">mkdir</span> <span class="nt">-p</span> ~/downloads
<span class="nb">mkdir</span> <span class="nt">-p</span> ~/downloads/incomplete
</code></pre></div></div>

<h3 id="4-configure-vpn-integration">4. Configure VPN Integration</h3>

<h4 id="install-openvpn">Install OpenVPN</h4>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt <span class="nb">install </span>openvpn
</code></pre></div></div>

<h4 id="set-up-your-vpn-configuration">Set Up Your VPN Configuration</h4>

<ol>
  <li>Obtain your OpenVPN configuration files from your VPN provider</li>
  <li>Create a directory for your VPN configurations:</li>
</ol>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo mkdir</span> <span class="nt">-p</span> /etc/openvpn/vpnprovider
</code></pre></div></div>

<ol>
  <li>Upload your .ovpn file to this directory</li>
  <li>Create a credentials file:</li>
</ol>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>nano /etc/openvpn/vpnprovider/credentials
</code></pre></div></div>

<p>Add your VPN username on the first line and password on the second.</p>

<ol>
  <li>Set secure permissions:</li>
</ol>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo chmod </span>600 /etc/openvpn/vpnprovider/credentials
</code></pre></div></div>

<h4 id="create-a-vpn-service">Create a VPN Service</h4>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>nano /etc/systemd/system/vpn.service
</code></pre></div></div>

<p>Add:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[Unit]
Description=VPN Connection
After=network.target

[Service]
ExecStart=/usr/sbin/openvpn --config /etc/openvpn/vpnprovider/your-chosen-server.ovpn --auth-user-pass /etc/openvpn/vpnprovider/credentials
Restart=on-failure

[Install]
WantedBy=multi-user.target
</code></pre></div></div>

<h3 id="5-link-qbittorrent-to-your-vpn">5. Link qBittorrent to Your VPN</h3>

<p>Update the qBittorrent service file to depend on the VPN:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>nano /etc/systemd/system/qbittorrent.service
</code></pre></div></div>

<p>Modify the [Unit] section:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[Unit]
Description=qBittorrent Daemon Service
After=network.target vpn.service
Requires=vpn.service
</code></pre></div></div>

<h3 id="6-enable-and-start-services">6. Enable and Start Services</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>systemctl daemon-reload
<span class="nb">sudo </span>systemctl <span class="nb">enable </span>vpn
<span class="nb">sudo </span>systemctl <span class="nb">enable </span>qbittorrent
<span class="nb">sudo </span>systemctl start vpn
<span class="nb">sudo </span>systemctl start qbittorrent
</code></pre></div></div>

<h2 id="common-gotchas-and-troubleshooting">Common Gotchas and Troubleshooting</h2>

<h3 id="the-nonexistent-home-directory-error">The “nonexistent” Home Directory Error</h3>

<p>If you see an error like:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Could not create required directory '/nonexistent/.cache/qBittorrent'
Aborted
</code></pre></div></div>

<p>This means the user running qBittorrent has an invalid home directory.</p>

<p><strong>Solution</strong>: Modify your service file to use your actual user account rather than a system user.</p>

<h3 id="permission-issues-with-download-directories">Permission Issues with Download Directories</h3>

<p>If Jellyfin can’t access your downloaded media:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Add the jellyfin user to your group</span>
<span class="nb">sudo </span>usermod <span class="nt">-a</span> <span class="nt">-G</span> yourusername jellyfin

<span class="c"># Ensure your directories have appropriate permissions</span>
<span class="nb">chmod </span>750 ~/downloads
<span class="nb">chmod </span>750 ~/downloads/incomplete
<span class="nb">chmod </span>750 ~/  <span class="c"># May be necessary if jellyfin needs to traverse your home dir</span>

<span class="c"># Restart jellyfin</span>
<span class="nb">sudo </span>systemctl restart jellyfin
</code></pre></div></div>

<h3 id="vpn-connection-dropping">VPN Connection Dropping</h3>

<p>If the VPN connection drops, qBittorrent may continue running but expose your real IP address.</p>

<p><strong>Solution</strong>: Bind qBittorrent specifically to the VPN interface by adding the <code class="language-plaintext highlighter-rouge">--net-interface=tun0</code> option:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">ExecStart</span><span class="o">=</span>/usr/bin/qbittorrent-nox <span class="nt">--webui-port</span><span class="o">=</span>8080 <span class="nt">--net-interface</span><span class="o">=</span>tun0
</code></pre></div></div>

<h3 id="web-ui-password-reset">Web UI Password Reset</h3>

<p>If you forget your Web UI password:</p>

<ol>
  <li>Stop the service:
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>systemctl stop qbittorrent
</code></pre></div>    </div>
  </li>
  <li>Edit the config file:
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>nano ~/.config/qBittorrent/qBittorrent.conf
</code></pre></div>    </div>
  </li>
  <li>Find the WebUI section and remove or modify the password line:
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[WebUI]
Password=
Username=admin
</code></pre></div>    </div>
  </li>
  <li>Restart the service:
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>systemctl start qbittorrent
</code></pre></div>    </div>
  </li>
</ol>

<h3 id="verifying-your-torrent-traffic-is-using-the-vpn">Verifying Your Torrent Traffic Is Using the VPN</h3>

<p>Run this command to check:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>ss <span class="nt">-tpn</span> | <span class="nb">grep </span>qbittorrent
</code></pre></div></div>

<p>Make sure connections show your VPN’s private IP (often starting with 10.x.x.x) rather than your actual network interface IP.</p>

<h2 id="configuring-qbittorrent-for-best-performance">Configuring qBittorrent for Best Performance</h2>

<p>Access the Web UI at <code class="language-plaintext highlighter-rouge">http://your-server-ip:8080</code> (default credentials: admin/adminadmin)</p>

<p>Important settings to adjust:</p>

<ol>
  <li><strong>Downloads</strong>
    <ul>
      <li>Set “Default Save Path” to your media directory</li>
      <li>Set proper incomplete download location</li>
    </ul>
  </li>
  <li><strong>Connection</strong>
    <ul>
      <li>Bind to the VPN interface (tun0)</li>
      <li>Adjust maximum connections based on your server capacity</li>
    </ul>
  </li>
  <li><strong>Speed</strong>
    <ul>
      <li>Set upload/download limits to avoid affecting other network activities</li>
    </ul>
  </li>
  <li><strong>BitTorrent</strong>
    <ul>
      <li>Enable encryption</li>
      <li>Configure port forwarding if supported by your VPN</li>
    </ul>
  </li>
</ol>

<h2 id="integrating-with-jellyfin">Integrating with Jellyfin</h2>

<p>For optimal integration with Jellyfin:</p>

<ol>
  <li>Configure qBittorrent to download to directories that Jellyfin scans</li>
  <li>Ensure proper permissions as outlined in the troubleshooting section</li>
  <li>Consider setting up auto-categorization based on media type (TV shows vs. Movies)</li>
</ol>

<h2 id="security-considerations">Security Considerations</h2>

<ol>
  <li>Change the default Web UI password immediately</li>
  <li>Use a VPN that doesn’t keep logs</li>
  <li>Consider implementing additional firewall rules</li>
  <li>Regularly update your system and qBittorrent</li>
</ol>

<h2 id="conclusion">Conclusion</h2>

<p>While setting up qBittorrent with VPN integration requires some initial effort, the result is a robust, secure downloading solution that integrates perfectly with media servers like Jellyfin. The combination of automated downloads and proper VPN protection makes for an excellent self-hosted solution that puts you in control of your media library.</p>

        
      </div><!-- /.entry-content -->
    </div><!-- /.entry-wrapper -->
    <nav class="pagination" role="navigation">
      
        <a href="http://localhost:4000/articles/2025/03/28/immich-proxmox.html" class="btn" title="Setting Up a ProxMox Server with Immich and a Removable SATA Drive">Previous</a>
      
      
    </nav><!-- /.pagination -->
  </article>
</div><!-- /#main -->

<div class="footer-wrapper">
  <footer role="contentinfo" class="entry-wrapper">
    

<span>&copy; 2025 . Powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> using the <a href="https://mademistakes.com/work/so-simple-jekyll-theme/" rel="nofollow">So Simple Theme</a>.</span>
<div class="social-icons">
	
	
	
	
	
	
	
	
	
  
	
  <a href="http://localhost:4000/feed.xml" title="Atom/RSS feed"><i class="fa fa-rss-square fa-2x"></i></a>
</div><!-- /.social-icons -->

  </footer>
</div><!-- /.footer-wrapper -->

<script type="text/javascript">
  var BASE_URL = 'http://localhost:4000';
</script>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="http://localhost:4000/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="http://localhost:4000/assets/js/scripts.min.js"></script>




</body>
</html>
